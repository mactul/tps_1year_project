#ifndef WRITER_STATS_H
#define WRITER_STATS_H

#include <SA/memory/dynamic_array.h>

void write_stats(const char* stats_filename, SA_DynamicArray* stats);

/*
Binary file format

 63    56|55    48|47    40|39    32|31    24|23    16|15     8|7      0
+-----------------------------------------------------------------------+
|                               Stat count                              |
+-----------------------------------+-----------------------------------+
|            (1) film_id            |        (1) recommendation         |
+-----------------------------------+-----------------------------------+
|           (1) max_year            |   (1) mean_rating_over_years[0]   |
+-----------------------------------+-----------------------------------+
|   (1) mean_rating_over_years[1]   |   (1) mean_rating_over_years[2]   |
+-----------------------------------+-----------------------------------+
|                                                                       |
|                                  ...                                  |
|                                                                       |
+-----------------------------------+-----------------------------------+
|   (1) mean_rating_over_years[7]   |   (1) mean_rating_over_years[8]   |
+-----------------------------------+-----------------------------------+
|   (1) mean_rating_over_years[9]   |(1) kept_rating_count_over_years[0]|
+-----------------------------------+-----------------------------------+
|(1) kept_rating_count_over_years[1]|(1) kept_rating_count_over_years[2]|
+-----------------------------------+-----------------------------------+
|                                                                       |
|                                  ...                                  |
|                                                                       |
+-----------------------------------+-----------------------------------+
|(1) kept_rating_count_over_years[7]|(1) kept_rating_count_over_years[8]|
+-----------------------------------+-----------------------------------+
|(1) kept_rating_count_over_years[9]|            (2) film_id            |
+-----------------------------------+-----------------------------------+
|                                                                       |
|                                  ...                                  |
|                                                                       |
+-----------------------------------+-----------------------------------+
*/

#endif